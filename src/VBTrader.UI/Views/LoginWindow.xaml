<Window
    x:Class="VBTrader.UI.Views.LoginWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="using:VBTrader.UI.Converters">

    <Grid Background="{StaticResource TradingDarkBackground}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Main Login Content -->
        <Border Grid.Row="1"
                Background="{StaticResource TradingPanelBackground}"
                CornerRadius="12"
                BorderBrush="{StaticResource TradingBorder}"
                BorderThickness="1"
                Padding="40"
                MaxWidth="400"
                HorizontalAlignment="Center">

            <StackPanel Spacing="24">
                <!-- Logo and Title -->
                <StackPanel Spacing="8" HorizontalAlignment="Center">
                    <TextBlock Text="VBTrader"
                               FontSize="32"
                               FontWeight="Bold"
                               Foreground="{StaticResource TradingBlue}"
                               HorizontalAlignment="Center" />
                    <TextBlock Text="Professional Trading Platform"
                               FontSize="14"
                               Foreground="{StaticResource TradingSecondaryForeground}"
                               HorizontalAlignment="Center" />
                </StackPanel>

                <!-- Status Message -->
                <TextBlock Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}"
                           FontSize="14"
                           Foreground="{StaticResource TradingForeground}"
                           TextWrapping="Wrap"
                           HorizontalAlignment="Center"
                           Visibility="{x:Bind ViewModel.StatusMessage, Mode=OneWay, Converter={StaticResource StringToVisibilityConverter}}" />

                <!-- Password Input -->
                <StackPanel Spacing="12">
                    <TextBlock Text="Password"
                               Foreground="{StaticResource TradingForeground}" />
                    <PasswordBox Password="{x:Bind ViewModel.Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                 PlaceholderText="Enter your password"
                                 IsEnabled="{x:Bind ViewModel.IsLoading, Mode=OneWay, Converter={StaticResource BoolNegationConverter}}" />
                </StackPanel>

                <!-- Confirm Password (Registration Mode) -->
                <StackPanel Spacing="12"
                            Visibility="{x:Bind ViewModel.IsLoginMode, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=Inverse}">
                    <TextBlock Text="Confirm Password"
                               Foreground="{StaticResource TradingForeground}" />
                    <PasswordBox Password="{x:Bind ViewModel.ConfirmPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                 PlaceholderText="Confirm your password"
                                 IsEnabled="{x:Bind ViewModel.IsLoading, Mode=OneWay, Converter={StaticResource BoolNegationConverter}}" />
                </StackPanel>

                <!-- Action Buttons -->
                <StackPanel Spacing="12">
                    <!-- Primary Action Button -->
                    <Button Content="{x:Bind ViewModel.IsLoginMode, Mode=OneWay, Converter={StaticResource BoolToStringConverter}, ConverterParameter='Login|Register'}"
                            Command="{x:Bind ViewModel.LoginCommand}"
                            HorizontalAlignment="Stretch"
                            Style="{StaticResource AccentButtonStyle}">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <ProgressRing Width="16" Height="16"
                                              IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}"
                                              Visibility="{x:Bind ViewModel.IsLoading, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}" />
                                <TextBlock Text="{x:Bind ViewModel.IsLoginMode, Mode=OneWay, Converter={StaticResource BoolToStringConverter}, ConverterParameter='Login|Register'}" />
                            </StackPanel>
                        </Button.Content>
                    </Button>

                    <!-- Toggle Mode Button -->
                    <Button Content="{x:Bind ViewModel.IsLoginMode, Mode=OneWay, Converter={StaticResource BoolToStringConverter}, ConverterParameter='Create Account|Back to Login'}"
                            Command="{x:Bind ViewModel.ToggleModeCommand}"
                            HorizontalAlignment="Stretch"
                            Style="{StaticResource DefaultButtonStyle}"
                            Visibility="{x:Bind ViewModel.HasExistingUser, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=Inverse}" />
                </StackPanel>

                <!-- Help Links -->
                <StackPanel Spacing="8">
                    <Button Content="Forgot Password?"
                            Command="{x:Bind ViewModel.ForgotPasswordCommand}"
                            Style="{StaticResource TextButtonStyle}"
                            HorizontalAlignment="Center"
                            Visibility="{x:Bind ViewModel.IsLoginMode, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}" />

                    <Button Content="Security Information"
                            Command="{x:Bind ViewModel.ShowHelpCommand}"
                            Style="{StaticResource TextButtonStyle}"
                            HorizontalAlignment="Center" />
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Footer -->
        <TextBlock Grid.Row="2"
                   Text="Secure • Professional • Powerful"
                   FontSize="12"
                   Foreground="{StaticResource TradingMutedForeground}"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Bottom"
                   Margin="0,0,0,20" />
    </Grid>
</Window>