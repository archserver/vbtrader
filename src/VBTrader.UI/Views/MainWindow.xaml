<Window
    x:Class="VBTrader.UI.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    Title="VBTrader - Real-Time Trading System"
    Width="1400"
    Height="900">

    <Grid Background="#FF1E1E1E">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Top Status Bar -->
        <Border Grid.Row="0" Background="#FF2D2D2D" BorderBrush="#FF404040" BorderThickness="0,0,0,1" Padding="12,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="VBTrader" FontSize="16" FontWeight="Bold" Foreground="White" VerticalAlignment="Center" />

                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" Spacing="20">
                    <TextBlock Text="{x:Bind ViewModel.MarketStatus, Mode=OneWay}" FontSize="12" Foreground="#FF00C851" VerticalAlignment="Center" />
                    <TextBlock Text="{x:Bind ViewModel.ConnectionStatus, Mode=OneWay}" FontSize="12" Foreground="#FF2196F3" VerticalAlignment="Center" />
                    <TextBlock Text="{x:Bind ViewModel.LastUpdateTime, Mode=OneWay}" FontSize="12" Foreground="#FFCCCCCC" VerticalAlignment="Center" />
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
                    <Button Content="Settings" Click="SettingsButton_Click" />
                    <Button Content="Refresh" Click="RefreshButton_Click" />
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Trading Area -->
        <Grid Grid.Row="1" Margin="8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="400" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="300" />
            </Grid.ColumnDefinitions>

            <!-- Left Panel - Market Data -->
            <Border Grid.Column="0" Background="#FF2D2D2D" BorderBrush="#FF404040" BorderThickness="1" Margin="0,0,4,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="REAL-TIME QUOTES" FontSize="14" FontWeight="Bold" Foreground="White" Margin="12,8" />

                    <controls:DataGrid Grid.Row="1"
                                     x:Name="QuotesDataGrid"
                                     ItemsSource="{x:Bind ViewModel.LiveQuotes, Mode=OneWay}"
                                     AutoGenerateColumns="False"
                                     Background="#FF1E1E1E"
                                     Foreground="White"
                                     GridLinesVisibility="Horizontal"
                                     HeadersVisibility="Column"
                                     Margin="8">
                        <controls:DataGrid.Columns>
                            <controls:DataGridTextColumn Header="Symbol" Binding="{Binding Symbol}" Width="60" />
                            <controls:DataGridTextColumn Header="Price" Binding="{Binding LastPrice, Converter={StaticResource CurrencyConverter}}" Width="80" />
                            <controls:DataGridTextColumn Header="Change" Binding="{Binding Change, Converter={StaticResource CurrencySignedConverter}}" Width="70" />
                            <controls:DataGridTextColumn Header="%" Binding="{Binding ChangePercent, Converter={StaticResource PercentageSignedConverter}}" Width="60" />
                            <controls:DataGridTextColumn Header="Volume" Binding="{Binding Volume, Converter={StaticResource VolumeToFormattedStringConverter}}" Width="80" />
                        </controls:DataGrid.Columns>
                    </controls:DataGrid>
                </Grid>
            </Border>

            <!-- Center Panel - Trading Controls -->
            <Border Grid.Column="1" Background="#FF2D2D2D" BorderBrush="#FF404040" BorderThickness="1" Margin="4,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="TRADING PANEL" FontSize="14" FontWeight="Bold" Foreground="White" Margin="12,8" />

                    <!-- Quick Trading Controls -->
                    <Grid Grid.Row="1" Margin="12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!-- Headers -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="STOCK 1" FontWeight="Bold" Foreground="#FF00C851" HorizontalAlignment="Center" Margin="0,0,0,8" />
                        <TextBlock Grid.Row="0" Grid.Column="1" Text="STOCK 2" FontWeight="Bold" Foreground="#FF2196F3" HorizontalAlignment="Center" Margin="0,0,0,8" />
                        <TextBlock Grid.Row="0" Grid.Column="2" Text="STOCK 3" FontWeight="Bold" Foreground="#FFFF9800" HorizontalAlignment="Center" Margin="0,0,0,8" />

                        <!-- Symbol Input -->
                        <TextBox Grid.Row="1" Grid.Column="0" x:Name="Symbol1TextBox" PlaceholderText="Symbol" Margin="4" HorizontalAlignment="Stretch" />
                        <TextBox Grid.Row="1" Grid.Column="1" x:Name="Symbol2TextBox" PlaceholderText="Symbol" Margin="4" HorizontalAlignment="Stretch" />
                        <TextBox Grid.Row="1" Grid.Column="2" x:Name="Symbol3TextBox" PlaceholderText="Symbol" Margin="4" HorizontalAlignment="Stretch" />

                        <!-- Buy Buttons (Alt+1,2,3) -->
                        <Button Grid.Row="2" Grid.Column="0" Content="BUY 100 (Alt+1)" Background="#FF00C851" Foreground="White" Margin="4" Click="BuyStock1_Click" />
                        <Button Grid.Row="2" Grid.Column="1" Content="BUY 100 (Alt+2)" Background="#FF00C851" Foreground="White" Margin="4" Click="BuyStock2_Click" />
                        <Button Grid.Row="2" Grid.Column="2" Content="BUY 100 (Alt+3)" Background="#FF00C851" Foreground="White" Margin="4" Click="BuyStock3_Click" />

                        <!-- Sell Buttons (Ctrl+1,2,3) -->
                        <Button Grid.Row="3" Grid.Column="0" Content="SELL 100 (Ctrl+1)" Background="#FFFF4444" Foreground="White" Margin="4" Click="SellStock1_Click" />
                        <Button Grid.Row="3" Grid.Column="1" Content="SELL 100 (Ctrl+2)" Background="#FFFF4444" Foreground="White" Margin="4" Click="SellStock2_Click" />
                        <Button Grid.Row="3" Grid.Column="2" Content="SELL 100 (Ctrl+3)" Background="#FFFF4444" Foreground="White" Margin="4" Click="SellStock3_Click" />
                    </Grid>

                    <!-- Trade Status -->
                    <Border Grid.Row="2" Background="#FF1E1E1E" BorderBrush="#FF404040" BorderThickness="1" Margin="8">
                        <ScrollViewer>
                            <TextBlock x:Name="TradeStatusTextBlock"
                                     Text="{x:Bind ViewModel.TradeStatus, Mode=OneWay}"
                                     Foreground="White"
                                     FontFamily="Consolas"
                                     FontSize="12"
                                     Padding="8"
                                     TextWrapping="Wrap" />
                        </ScrollViewer>
                    </Border>
                </Grid>
            </Border>

            <!-- Right Panel - Market Opportunities -->
            <Border Grid.Column="2" Background="#FF2D2D2D" BorderBrush="#FF404040" BorderThickness="1" Margin="4,0,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="MARKET OPPORTUNITIES" FontSize="14" FontWeight="Bold" Foreground="White" Margin="12,8" />

                    <controls:DataGrid Grid.Row="1"
                                     x:Name="OpportunitiesDataGrid"
                                     ItemsSource="{x:Bind ViewModel.MarketOpportunities, Mode=OneWay}"
                                     AutoGenerateColumns="False"
                                     Background="#FF1E1E1E"
                                     Foreground="White"
                                     GridLinesVisibility="Horizontal"
                                     HeadersVisibility="Column"
                                     Margin="8">
                        <controls:DataGrid.Columns>
                            <controls:DataGridTextColumn Header="Symbol" Binding="{Binding Symbol}" Width="60" />
                            <controls:DataGridTextColumn Header="Score" Binding="{Binding Score, Converter={StaticResource ScoreConverter}}" Width="50" />
                            <controls:DataGridTextColumn Header="Type" Binding="{Binding OpportunityType}" Width="80" />
                            <controls:DataGridTextColumn Header="Change%" Binding="{Binding PriceChangePercent, Converter={StaticResource PercentageSignedConverter}}" Width="60" />
                        </controls:DataGrid.Columns>
                    </controls:DataGrid>
                </Grid>
            </Border>
        </Grid>

        <!-- Bottom Status Bar -->
        <Border Grid.Row="2" Background="#FF2D2D2D" BorderBrush="#FF404040" BorderThickness="0,1,0,0" Padding="12,4">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}" Foreground="#FFCCCCCC" VerticalAlignment="Center" />
                <TextBlock Grid.Column="1" Text="{x:Bind ViewModel.ActiveConnectionsCount, Mode=OneWay}" Foreground="#FF2196F3" VerticalAlignment="Center" />
            </Grid>
        </Border>
    </Grid>
</Window>